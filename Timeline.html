<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>مثال على GSAP Timeline</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Cairo", sans-serif;
        background-color: #1a202c;
        color: #e2e8f0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        padding: 20px;
        box-sizing: border-box;
      }
      .container {
        width: 100%;
        max-width: 600px;
        padding: 2rem;
        background-color: #2d3748;
        border-radius: 1rem;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      .stage {
        position: relative;
        height: 250px;
        border: 2px dashed #4a5568;
        border-radius: 0.5rem;
        padding: 1rem;
      }
      .box {
        position: absolute;
        width: 60px;
        height: 60px;
        border-radius: 0.5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        color: white;
      }
      .box1 {
        background-color: #4299e1;
        top: 1rem;
        right: 1rem;
      }
      .box2 {
        background-color: #48bb78;
        top: calc(1rem + 70px);
        right: 1rem;
      }
      .box3 {
        background-color: #ed8936;
        top: calc(1rem + 140px);
        right: 1rem;
      }
      .controls {
        margin-top: 1.5rem;
        display: flex;
        justify-content: center;
        gap: 0.75rem;
        flex-wrap: wrap;
      }
      .control-btn {
        background-color: #4299e1;
        color: white;
        font-weight: bold;
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .control-btn:hover {
        background-color: #3182ce;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-2xl font-bold text-center mb-4">
        مثال على GSAP Timeline
      </h1>
      <div class="stage">
        <div class="box box1">1</div>
        <div class="box box2">2</div>
        <div class="box box3">3</div>
      </div>
      <div class="controls">
        <button id="playBtn" class="control-btn">Play</button>
        <button id="pauseBtn" class="control-btn">Pause</button>
        <button id="resumeBtn" class="control-btn">Resume</button>
        <button id="reverseBtn" class="control-btn">Reverse</button>
        <button id="restartBtn" class="control-btn">Restart</button>
      </div>
    </div>

    <!-- بنستدعي مكتبة GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

    <script>
      // بنستنى لما الصفحة كلها تحمل
      window.addEventListener("load", () => {
        // 1. بنعمل Timeline جديد ونقدر نديله شوية إعدادات افتراضية
        // هنا مثلاً، قولناله خلي أي أنيميشن جواك مدته الافتراضية نص ثانية
        const tl = gsap.timeline({
          defaults: { duration: 0.7, ease: "power2.out" },
        });

        // 2. بنبدأ نضيف الأنيميشنز بتاعتنا للـ timeline بالترتيب

        // الأنيميشن الأول: حرك المربع الأول 200 بكسل شمال وكبر حجمه
        tl.to(".box1", {
          x: -200,
          scale: 1.2,
        });

        // الأنيميشن الثاني: حرك المربع الثاني 200 بكسل شمال وغير لونه
        // ده هيشتغل تلقائياً بعد ما الأول يخلص
        tl.to(
          ".box2",
          {
            x: -200,
            backgroundColor: "#9f7aea",
          },
          "+=0.5"
        ); // هنا بنقول "ابدأ بعد 0.5 ثانية من نهاية الأنيميشن اللي قبلك"

        // الأنيميشن الثالث: حرك المربع الثالث وخلي الأنيميشن يبدأ قبل نهاية اللي قبله بـ 0.3 ثانية
        // استخدمنا "-=0.3" عشان نعمل التداخل ده
        tl.to(
          ".box3",
          {
            x: -200,
            rotation: 360,
          },
          "-=0.8"
        );

        // الأنيميشن الرابع: هنرجع كل المربعات مكانها في نفس الوقت
        // استخدمنا "<" عشان نقوله "ابدأ مع بداية الأنيميشن اللي قبلك"
        // لكن بما إن مفيش أنيميشن قبله في السطر ده، بنستخدمه عشان نقول "ابدأ هنا"
        // وهنضيف علامة أو label عشان نرجع للنقطة دي بسهولة
        tl.add("returnHome");
        tl.to(".box", {
          // بنستهدف كل المربعات اللي ليها كلاس .box
          x: 0,
          scale: 1,
          rotation: 0,
          backgroundColor: (index, target) => {
            // بنرجع اللون الأصلي لكل مربع
            if (target.classList.contains("box1")) return "#4299e1";
            if (target.classList.contains("box2")) return "#48bb78";
            return "#ed8936";
          },
          stagger: 0.1, // خاصية رائعة بتخلي الأنيميشن يطبق على العناصر واحد ورا التاني بفرق 0.1 ثانية
        });

        // 3. بنربط الأزرار بالـ timeline عشان نتحكم فيه
        const playBtn = document.getElementById("playBtn");
        const pauseBtn = document.getElementById("pauseBtn");
        const resumeBtn = document.getElementById("resumeBtn");
        const reverseBtn = document.getElementById("reverseBtn");
        const restartBtn = document.getElementById("restartBtn");

        playBtn.addEventListener("click", () => tl.play());
        pauseBtn.addEventListener("click", () => tl.pause());
        resumeBtn.addEventListener("click", () => tl.resume());
        reverseBtn.addEventListener("click", () => tl.reverse());
        restartBtn.addEventListener("click", () => tl.restart());
      });
    </script>
  </body>
</html>
